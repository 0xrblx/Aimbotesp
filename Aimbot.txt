-- DELTA EXECUTOR COMPATIBLE VERSION -- Key System + ESP + Aimlock -- Created by VSPLOIT

--// Settings
local KEY = "basharhub"
local DISCORD_INVITE = "http://discord.gg/azc"
local FOV = 99999

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

--// Create Key GUI
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 280, 0, 180)
Frame.Position = UDim2.new(0.5, -140, 0.5, -90)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.Active = true

-- Draggable support for mobile and desktop
do
    local dragging
    local dragInput
    local dragStart
    local startPos

    local function update(input)
        local delta = input.Position - dragStart
        Frame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end

    Frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = Frame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    Frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end

-- Buttons
local GetKeyBtn = Instance.new("TextButton", Frame)
GetKeyBtn.Size = UDim2.new(0, 260, 0, 40)
GetKeyBtn.Position = UDim2.new(0, 10, 0, 10)
GetKeyBtn.Text = "Get Key"
GetKeyBtn.TextSize = 24
GetKeyBtn.MouseButton1Click:Connect(function()
    setclipboard(DISCORD_INVITE)
end)

local KeyBox = Instance.new("TextBox", Frame)
KeyBox.Size = UDim2.new(0, 260, 0, 40)
KeyBox.Position = UDim2.new(0, 10, 0, 60)
KeyBox.PlaceholderText = "Enter Key Here"
KeyBox.TextColor3 = Color3.new(1, 1, 1)
KeyBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
KeyBox.TextSize = 24

local SubmitBtn = Instance.new("TextButton", Frame)
SubmitBtn.Size = UDim2.new(0, 260, 0, 40)
SubmitBtn.Position = UDim2.new(0, 10, 0, 110)
SubmitBtn.Text = "Submit Key"
SubmitBtn.TextSize = 24

SubmitBtn.MouseButton1Click:Connect(function()
    if KeyBox.Text == KEY then
        Frame:Destroy()

        -- âœ… SAY "I am a cheater" IN CHAT
        game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer("I am a cheater", "All")

        -- Load main GUI
        local gui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
        gui.ResetOnSpawn = false

        local panel = Instance.new("Frame", gui)
        panel.Size = UDim2.new(0, 180, 0, 110)
        panel.Position = UDim2.new(0.01, 0, 0.3, 0)
        panel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
        panel.Active = true

        -- Draggable support for panel (same as above)
        do
            local dragging
            local dragInput
            local dragStart
            local startPos

            local function update(input)
                local delta = input.Position - dragStart
                panel.Position = UDim2.new(
                    startPos.X.Scale,
                    startPos.X.Offset + delta.X,
                    startPos.Y.Scale,
                    startPos.Y.Offset + delta.Y
                )
            end

            panel.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = true
                    dragStart = input.Position
                    startPos = panel.Position

                    input.Changed:Connect(function()
                        if input.UserInputState == Enum.UserInputState.End then
                            dragging = false
                        end
                    end)
                end
            end)

            panel.InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then
                    dragInput = input
                end
            end)

            UserInputService.InputChanged:Connect(function(input)
                if input == dragInput and dragging then
                    update(input)
                end
            end)
        end

        local aimbotBtn = Instance.new("TextButton", panel)
        aimbotBtn.Size = UDim2.new(1, 0, 0.5, 0)
        aimbotBtn.Text = "Aimbot: OFF"
        aimbotBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        aimbotBtn.TextSize = 24

        local espBtn = Instance.new("TextButton", panel)
        espBtn.Size = UDim2.new(1, 0, 0.5, 0)
        espBtn.Position = UDim2.new(0, 0, 0.5, 0)
        espBtn.Text = "ESP: OFF"
        espBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        espBtn.TextSize = 24

        local aimbotOn = false
        local espOn = false

        aimbotBtn.MouseButton1Click:Connect(function()
            aimbotOn = not aimbotOn
            aimbotBtn.Text = "Aimbot: " .. (aimbotOn and "ON" or "OFF")
        end)

        espBtn.MouseButton1Click:Connect(function()
            espOn = not espOn
            espBtn.Text = "ESP: " .. (espOn and "ON" or "OFF")
        end)

        RunService.RenderStepped:Connect(function()
            if aimbotOn then
                local closest = nil
                local closestDist = FOV
                local viewportMousePos

                -- For mobile: Use UserInputService to get touch position, fallback to center of screen
                if UserInputService.TouchEnabled and not UserInputService.MouseEnabled then
                    viewportMousePos = Vector2.new(
                        UserInputService:GetMouseLocation().X,
                        UserInputService:GetMouseLocation().Y
                    )
                else
                    viewportMousePos = Vector2.new(LocalPlayer:GetMouse().X, LocalPlayer:GetMouse().Y)
                end

                for _, p in pairs(Players:GetPlayers()) do
                    if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                        local head = p.Character.Head
                        local headPos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(head.Position)
                        if onScreen then
                            local head2D = Vector2.new(headPos.X, headPos.Y)
                            local distance = (viewportMousePos - head2D).Magnitude
                            if distance < closestDist then
                                closest = p
                                closestDist = distance
                            end
                        end
                    end
                end

                if closest and closest.Character:FindFirstChild("Head") then
                    workspace.CurrentCamera.CFrame = CFrame.new(
                        workspace.CurrentCamera.CFrame.Position,
                        closest.Character.Head.Position
                    )
                end
            end
        end)

        RunService.RenderStepped:Connect(function()
            if espOn then
                for _, p in pairs(Players:GetPlayers()) do
                    if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                        if not p.Character:FindFirstChild("ESPTag") then
                            local billboard = Instance.new("BillboardGui", p.Character.Head)
                            billboard.Name = "ESPTag"
                            billboard.Size = UDim2.new(0, 100, 0, 30)
                            billboard.AlwaysOnTop = true

                            local label = Instance.new("TextLabel", billboard)
                            label.Size = UDim2.new(1, 0, 1, 0)
                            label.Text = p.Name
                            label.TextColor3 = Color3.fromRGB(255, 0, 0)
                            label.BackgroundTransparency = 1
                        end
                    end
                end
            else
                for _, p in pairs(Players:GetPlayers()) do
                    if p.Character then
                        local tag = p.Character:FindFirstChild("ESPTag")
                        if tag then tag:Destroy() end
                    end
                end
            end
        end)
    else
        KeyBox.Text = "Wrong Key!"
    end
end)
